\usepackage[ddmmyyyy]{datetime}
\renewcommand{\dateseparator}{.}

\usepackage{fontspec}
\setmonofont[Mapping=tex-text,Scale]{Iosevka}

\usepackage{hyperref}
\newcommand{\hrefootnote}[2]{\href{#1}{#2}\footnote{\url{#1}}}
\makeatletter
\hypersetup{
  pdffitwindow=true,
  pdfstartview={FitH},
  pdfauthor={Eric Bailey <eric@ericb.me>},
  pdfsubject={%
    My literate dotfiles, managed by Nix and home-manager.%
  },
  pdfkeywords={Nix, NixOS, literate programming, noweb, dotfiles, reproducible,
    configuration, home-manager},
  pdfinfo={
    CreationDate={D:20200130011545},
    ModificationDate={D:\pdfdate},
  },
  colorlinks=true
}
\makeatother

\usepackage[outputdir=../docs]{minted}
\usemintedstyle{tango}
\setminted{baselinestretch=1,fontsize=\small}

\newmintedfile[inputbash]{bash}{linenos,fontsize=\small}
\newmintinline[bash]{bash}{}
\newmintinline[ini]{ini}{}
\newmintinline[nix]{nix}{}


%% HACK: https://tex.stackexchange.com/a/200725/45537
\usepackage{ifxetex}
\ifxetex
  \newcommand{\textls}[2][5]{%
    \begingroup\addfontfeatures{LetterSpace=#1}#2\endgroup
  }
  \renewcommand{\allcapsspacing}[1]{\textls[15]{#1}}
  \renewcommand{\smallcapsspacing}[1]{\textls[10]{#1}}
  \renewcommand{\allcaps}[1]{\textls[15]{\MakeTextUppercase{#1}}}
  \renewcommand{\smallcaps}[1]{\smallcapsspacing{\scshape\MakeTextLowercase{#1}}}
  \renewcommand{\textsc}[1]{\smallcapsspacing{\textsmallcaps{#1}}}
\fi


\usepackage{noweb}
\noweboptions{externalindex,smallcode,shortxref,hideunuseddefs,noidentxref,nomargintag,webnumbering}


\usepackage[colorinlistoftodos,prependcaption,textsize=small]{todonotes}
\newcommand{\todocolor}[3]{%
  \todo[backgroundcolor=#1!50,bordercolor=#1,linecolor=#1]{#3}%
  \message{#2: #3}%
}
\newcommand{\todor}[1]{\todocolor{red}{FIXME}{#1}}
\newcommand{\todoo}[1]{\todocolor{orange}{TODO}{#1}}


\usepackage{dirtytalk}

\usepackage[nopostdot,toc,xindy]{glossaries}
\usepackage{glossaries-extra}
\makeglossaries
\input{glossary}
\renewcommand*{\glstextformat}[1]{\textsl{#1}}


\author{Eric Bailey}
